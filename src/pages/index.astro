---
---
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Sign Editor â€” Font Test</title>
<style>
  html,body{margin:0;height:100%;background:#0b0f19;color:#fff;font-family:system-ui,-apple-system,Segoe UI,Inter,Roboto,Arial,sans-serif}
  .wrap{max-width:1200px;margin:24px auto;padding:0 16px;display:grid;gap:16px;grid-template-columns:1.1fr .9fr}
  @media (max-width:1000px){.wrap{grid-template-columns:1fr}}
  .card{background:#141a2a;border:1px solid #232a45;border-radius:14px;padding:12px}
  label{font-size:12px;opacity:.9;display:block;margin-bottom:6px}
  select,input,button{width:100%;padding:10px 12px;border-radius:10px;border:1px solid #2a3355;background:#0b0f19;color:#fff}
  canvas{width:100%;height:auto;background:#fff;border:1px solid #232a45;border-radius:10px}
  h2{margin:6px 0 10px}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <canvas id="cv" width="1600" height="900"></canvas>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px">
        <button id="download">Download PNG</button>
        <button id="fullscreen">Full screen</button>
      </div>
    </div>
    <div class="card">
      <h2>Fonts</h2>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
        <div>
          <label for="fontGlobal">Global font family</label>
          <select id="fontGlobal">
            <option value="system-ui, -apple-system, Segoe UI, Inter, Roboto, Arial, sans-serif">System UI</option>
            <option value="Arial, Helvetica, sans-serif">Arial</option>
            <option value="Verdana, Geneva, sans-serif">Verdana</option>
            <option value="Tahoma, Geneva, sans-serif">Tahoma</option>
            <option value="'Trebuchet MS', Helvetica, sans-serif">Trebuchet MS</option>
            <option value="Georgia, serif">Georgia</option>
            <option value="'Times New Roman', Times, serif">Times New Roman</option>
            <option value="'Courier New', Courier, monospace">Courier New</option>
          </select>
        </div>
        <div>
          <label for="fontCustom">Custom font name (optional)</label>
          <input id="fontCustom" placeholder="e.g., Inter, Poppins" />
        </div>
      </div>

      <h2 style="margin-top:16px">Text</h2>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
        <div><label for="room">Room title</label><input id="room" value="R105 Projekti S" /></div>
        <div><label for="status">Status</label><select id="status"><option>BUSY</option><option>AVAILABLE</option></select></div>
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;margin-top:10px">
        <div><label>Room size</label><input id="size-room" type="number" min="24" max="300" value="120" /></div>
        <div><label>Bold</label><input id="bold-room" type="checkbox" checked /></div>
        <div><label>Move text by drag</label><button id="reset">Reset position</button></div>
      </div>
    </div>
  </div>

  <div id="fs" style="display:none;position:fixed;inset:0;background:#000;align-items:center;justify-content:center;z-index:9999">
    <canvas id="fsCanvas" width="1600" height="900"></canvas>
  </div>

  <script>
    const $ = id => document.getElementById(id);
    const cv = $('cv'), ctx = cv.getContext('2d');
    const fsWrap = $('fs'), fsCanvas = $('fsCanvas'), fctx = fsCanvas.getContext('2d');

    const S = {
      fontGlobal: $('fontGlobal').value,
      fontCustom: '',
      text: { room: $('room').value, status: 'BUSY' },
      size: { room: 120 },
      bold: { room: true },
      pos: { room: {x: 32, y: 24} }
    };

    function fontFamily(){ return S.fontCustom.trim() ? S.fontCustom.trim() : S.fontGlobal; }
    function fontOfRoom(){ return `${S.bold.room ? '900':'400'} ${S.size.room}px ${fontFamily()}`; }

    function draw(context = ctx){
      const w=1600,h=900;
      context.clearRect(0,0,w,h);
      context.fillStyle='#fff'; context.fillRect(0,0,w,h);
      context.fillStyle = S.text.status === 'AVAILABLE' ? '#26a65b' : '#cf676e';
      context.fillRect(0,0,w,200);

      context.textBaseline='top';
      context.textAlign='left';
      context.fillStyle='#000';
      context.font = fontOfRoom();
      context.fillText(S.text.room, S.pos.room.x, S.pos.room.y);
    }

    // Bindings
    $('fontGlobal').addEventListener('change', ()=>{ S.fontGlobal=$('fontGlobal').value; draw(); });
    $('fontCustom').addEventListener('input', ()=>{ S.fontCustom=$('fontCustom').value; draw(); });
    $('room').addEventListener('input', ()=>{ S.text.room=$('room').value; draw(); });
    $('status').addEventListener('change', ()=>{ S.text.status=$('status').value; draw(); });
    $('size-room').addEventListener('input', ()=>{ S.size.room=+$('size-room').value; draw(); });
    $('bold-room').addEventListener('change', ()=>{ S.bold.room=$('bold-room').checked; draw(); });
    $('reset').addEventListener('click', ()=>{ S.pos.room = {x:32,y:24}; draw(); });

    // Drag
    const pt = e => { const r=cv.getBoundingClientRect(); return {x:(e.clientX-r.left)*cv.width/r.width, y:(e.clientY-r.top)*cv.height/r.height}; };
    function boxOfRoom(){
      ctx.font = fontOfRoom();
      const w = ctx.measureText(S.text.room).width, h = S.size.room*1.2;
      return { x:S.pos.room.x, y:S.pos.room.y, w, h };
    }
    let drag=false, off={dx:0,dy:0};
    cv.addEventListener('pointerdown', e=>{
      cv.setPointerCapture(e.pointerId);
      const p=pt(e), b=boxOfRoom();
      if(p.x>=b.x && p.x<=b.x+b.w && p.y>=b.y && p.y<=b.y+b.h){
        drag=true; off.dx=p.x-b.x; off.dy=p.y-b.y;
      }
    });
    cv.addEventListener('pointermove', e=>{
      if(!drag) return;
      const p=pt(e);
      S.pos.room.x = p.x - off.dx;
      S.pos.room.y = p.y - off.dy;
      draw();
    });
    cv.addEventListener('pointerup', ()=>{ drag=false; });

    // Download and Fullscreen
    $('download').addEventListener('click', ()=>{ const a=document.createElement('a'); a.download='sign.png'; a.href=cv.toDataURL('image/png'); a.click(); });
    $('fullscreen').addEventListener('click', ()=>{ draw(fctx); fsWrap.style.display='flex'; fsWrap.requestFullscreen?.(); });
    fsWrap.addEventListener('click', ()=>{ document.exitFullscreen?.(); fsWrap.style.display='none'; });

    draw();
  </script>
</body>
</html>
