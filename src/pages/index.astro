---
---
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Room Sign Editor</title>
  <style>
    :root { --gap: 12px; }
    html, body { margin:0; height:100%; background:#0b0f19; color:#fff; font-family: system-ui, -apple-system, Segoe UI, Inter, Roboto, Arial, sans-serif; }
    .wrap { max-width:1200px; margin:24px auto; padding:0 16px; display:grid; gap:16px; grid-template-columns: 1.2fr .8fr; }
    @media (max-width: 980px){ .wrap{ grid-template-columns: 1fr; } }
    .card { background:#141a2a; border:1px solid #232a45; border-radius:14px; padding:12px; }
    label{ font-size:12px; opacity:.9; display:block; margin-bottom:6px; }
    input, select { width:100%; padding:10px 12px; border-radius:10px; border:1px solid #2a3355; background:#0b0f19; color:#fff; }
    button { cursor:pointer; border:1px solid #2a3355; background:#1a2240; color:#fff; padding:10px 12px; border-radius:10px; }
    .row{ display:grid; grid-template-columns:1fr 1fr; gap:var(--gap); }
    .row3{ display:grid; grid-template-columns:1fr 1fr 1fr; gap:var(--gap); }
    canvas{ width:100%; height:auto; background:#fff; border-radius:10px; border:1px solid #232a45; cursor:pointer; }
    .hint{ font-size:12px; opacity:.8; margin-top:8px }
    #fullscreen-overlay {
      display:none; position:fixed; inset:0; background:#000; z-index:9999;
      align-items:center; justify-content:center;
    }
    #fullscreen-overlay canvas { width:90vw; height:auto; border:0; background:#fff; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <canvas id="c" width="1600" height="900" aria-label="preview"></canvas>
    </div>

    <div class="card">
      <div class="row">
        <div>
          <label for="room">Room title</label>
          <input id="room" type="text" placeholder="R105 Projekti S" />
        </div>
        <div>
          <label for="subroom">Sub room</label>
          <input id="subroom" type="text" placeholder="R103" />
        </div>
      </div>

      <div class="row" style="margin-top:var(--gap)">
        <div>
          <label for="status">Status</label>
          <select id="status">
            <option>BUSY</option>
            <option>AVAILABLE</option>
          </select>
        </div>
        <div>
          <label for="time">Time range</label>
          <input id="time" type="text" placeholder="15:00 - 18:00" />
        </div>
      </div>

      <div class="row" style="margin-top:var(--gap)">
        <div>
          <label for="note">Center note</label>
          <input id="note" type="text" placeholder="Your paragraph text" />
        </div>
        <div>
          <label for="date">Date</label>
          <input id="date" type="text" placeholder="dd/mm/yyyy" />
        </div>
      </div>

      <div class="row" style="margin-top:var(--gap)">
        <div>
          <label for="cap">Capacity</label>
          <input id="cap" type="text" placeholder="8 persons" />
        </div>
        <div>
          <label for="aud">Available to</label>
          <input id="aud" type="text" placeholder="Staff, Student" />
        </div>
      </div>

      <div class="row3" style="margin-top:var(--gap)">
        <div>
          <label for="accent">Accent color</label>
          <input id="accent" type="color" value="#bd4c52" />
        </div>
        <div>
          <label for="statusColorBusy">Busy color</label>
          <input id="statusColorBusy" type="color" value="#cf676e" />
        </div>
        <div>
          <label for="statusColorAvail">Available color</label>
          <input id="statusColorAvail" type="color" value="#26a65b" />
        </div>
      </div>

      <div class="row" style="margin-top:var(--gap)">
        <button id="fullscreen">Full screen</button>
        <button id="download">Download PNG</button>
        <button id="copy">Copy to clipboard</button>
      </div>
      <p class="hint">Click the preview or the button to enter full screen. Click anywhere to exit.</p>
    </div>
  </div>

  <div id="fullscreen-overlay">
    <canvas id="fullCanvas" width="1600" height="900"></canvas>
  </div>

  <script>
    // helpers
    const $ = (id) => document.getElementById(id);

    const c = $('c');
    const ctx = c.getContext('2d');

    const fullOverlay = $('fullscreen-overlay');
    const fullCanvas = $('fullCanvas');
    const fctx = fullCanvas.getContext('2d');

    const inputs = {
      room: $('room'),
      sub: $('subroom'),
      status: $('status'),
      time: $('time'),
      note: $('note'),
      date: $('date'),
      cap: $('cap'),
      aud: $('aud'),
      accent: $('accent'),
      busy: $('statusColorBusy'),
      avail: $('statusColorAvail'),
      download: $('download'),
      copy: $('copy'),
      fullscreen: $('fullscreen')
    };

    const S = {
      room: 'R105 Projekti S',
      sub: 'R103',
      status: 'BUSY',
      time: '15:00 - 18:00',
      note: 'Your paragraph text',
      date: 'dd/mm/yyyy',
      cap: '8 persons',
      aud: 'Staff, Student',
      accent: '#bd4c52',
      busy: '#cf676e',
      avail: '#26a65b'
    };

    // hydrate defaults into inputs
    inputs.room.value = S.room;
    inputs.sub.value = S.sub;
    inputs.status.value = S.status;
    inputs.time.value = S.time;
    inputs.note.value = S.note;
    inputs.date.value = S.date;
    inputs.cap.value = S.cap;
    inputs.aud.value = S.aud;
    inputs.accent.value = S.accent;
    inputs.busy.value = S.busy;
    inputs.avail.value = S.avail;

    function draw(context = ctx) {
      const cw = 1600, ch = 900;
      context.clearRect(0, 0, cw, ch);

      // background
      context.fillStyle = '#ffffff';
      context.fillRect(0, 0, cw, ch);

      // top banner
      const bannerH = 200;
      context.fillStyle = S.accent;
      context.fillRect(0, 0, cw, bannerH);

      // title
      context.fillStyle = '#000';
      context.textBaseline = 'top';
      context.textAlign = 'left';
      context.font = '900 120px system-ui, -apple-system, Segoe UI, Inter, Roboto, Arial, sans-serif';
      context.fillText(S.room, 32, 24);

      // sub room
      context.font = '800 56px system-ui, -apple-system, Segoe UI, Inter, Roboto, Arial, sans-serif';
      context.fillText(S.sub, 32, bannerH - 72);

      // center note
      context.textAlign = 'center';
      context.font = '600 28px system-ui, -apple-system, Segoe UI, Inter, Roboto, Arial, sans-serif';
      context.fillText(S.note, cw / 2, bannerH + 10);

      // status
      context.textAlign = 'left';
      context.fillStyle = S.status === 'AVAILABLE' ? S.avail : S.busy;
      context.font = '900 160px system-ui, -apple-system, Segoe UI, Inter, Roboto, Arial, sans-serif';
      context.fillText(S.status, 32, bannerH + 70);

      // time
      context.fillStyle = '#000';
      context.font = '900 64px system-ui, -apple-system, Segoe UI, Inter, Roboto, Arial, sans-serif';
      context.fillText(S.time, 32, bannerH + 240);

      // footer
      const footerY = ch - 80;
      context.textAlign = 'left';
      context.font = '600 36px system-ui, -apple-system, Segoe UI, Inter, Roboto, Arial, sans-serif';
      context.fillText('Capacity: ' + S.cap, 32, footerY);

      context.textAlign = 'center';
      context.fillText('Available to: ' + S.aud, cw / 2, footerY);

      context.textAlign = 'right';
      context.fillText(S.date, cw - 32, footerY);
    }

    // wire inputs
    for (const [key, node] of Object.entries(inputs)) {
      if (['download','copy','fullscreen'].includes(key)) continue;
      node.addEventListener('input', () => {
        const v = node.value;
        if (key === 'status') S.status = v.toUpperCase();
        else S[key] = v;
        draw();
      });
    }

    // download
    inputs.download.addEventListener('click', () => {
      const a = document.createElement('a');
      a.download = 'room-sign.png';
      a.href = c.toDataURL('image/png');
      a.click();
    });

    // copy
    inputs.copy.addEventListener('click', async () => {
      const blob = await new Promise(r => c.toBlob(r, 'image/png'));
      try {
        await navigator.clipboard.write([new ClipboardItem({ 'image/png': blob })]);
        alert('Copied to clipboard');
      } catch {
        alert('Copy failed. Use Download instead.');
      }
    });

    // fullscreen
    function openFullscreen() {
      // draw to the fullscreen canvas so it is crisp
      draw(fctx);
      fullOverlay.style.display = 'flex';
      if (fullOverlay.requestFullscreen) fullOverlay.requestFullscreen();
    }
    function closeFullscreen() {
      fullOverlay.style.display = 'none';
      if (document.fullscreenElement) document.exitFullscreen();
    }

    inputs.fullscreen.addEventListener('click', openFullscreen);
    c.addEventListener('click', openFullscreen);
    fullOverlay.addEventListener('click', closeFullscreen);

    // initial paint
    draw();
  </script>
</body>
</html>
